네트워크 계층(Network Layer)

1. 정의

- 인터넷 계층이라고도 불림.
- 통신 방법(케이블의 차이라던가..)의 차이를 흡수하는 기능, "누가 누구에게 전달"할지에 대한 정보를 다룬다.
- 트랜스포트 계층의 세그먼트는 네트워크 계층에서 데이터라고 불리고, IP헤더가 붙으면 **IP데이터그램**이라고 불린다.
- IP헤더에는 목적지를 특정하는 번호(IP주소)가 있다.
- 목적지까지 경로가 여러개 있는 경우, 적절한 경로로 전달하는 역할도 한다.(라우터 이용)

[라우터]

- 라우터란? 네트워크 간을 연결해서 패킷이 목적지에 전달될 때까지 길 안내를 하는 기기.
- 라우터의 네트워크 계층에서는 IP헤더에 기록된 목적지IP주소를 보고 다음 전송처를 결정(송신에서 수신까지 여려개의 네트워크를 경우하니깐 전송처의 길이 여러개라고 보면 됨.)
- 라우터 갯수를 몇개 통과했는지를 말할 때, 단위를 홉(hop)이라고 한다. ex) 송신에서 수신으로 가기위해서, 송신지 => b라우터 => c라우텨 = > d라우터 => 수신지 를 거쳤다면, 3홉(3hop)이라고 할 수 있다.

2. 프로토콜의 종류

(1) IP

- 비커넥션 프로토콜 => 일단 보내면 OK!, 상대한테 전달됬는지 신경쓰지 않음. => 그래서 신뢰성 있는 IP가 되기 위해 지원하는 ICMP가 존재.
- IP데이터 전송은 **Best Effort방식**
  \*Best Effort란? 노력은 하지만 결과는 보장하지 않는다. 재전송하지는 않음, 목적지주소가 있는지 없는지나 헤더 상태 판단 처리는 해줌.
- 송신측에서는 최적의 경로로 전달.(목적지에 빨리 도달하도록 함.)
- 수신측에서는 목적지 주소 확인 후(IP주소 확인 후), 자기 앞으로 온 것만 받는다. 그리고 트랜스포트 계층의 지정된 프로토콜에 전달한다.

  a. IPv4

- 32비트로, 8비트씩 구분하고 10진수로 바꿔서 표현하기도 한다.
- 네트워크부, 호스트부로 구성되어 있다. => 이 둘의 경걔를 나타내는 것이 **서브넷 마스크**

  b. IPv6

(2) ICMP(Internet Control Message Protocol)

- 수신 측에 전달되지 않는 등의 문제가 발생할 때, 송신 측에 메시지를 보냄. => IP헤더에 추가해서 보냄(캡슐화)
- IP와 ICMP는 TCP와 UDP처럼 병렬적인 관계가 아님! ICMP는 어디까지나 IP를 도와주는 프로토콜이다.
