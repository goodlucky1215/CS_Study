### 1. 시스템의 구조

<p align="center">
  <img
    src="https://github.com/goodlucky1215/CS_Study/blob/main/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/2.%EC%BB%B4%ED%93%A8%ED%84%B0%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98%20%EA%B5%AC%EC%A1%B0/%EC%82%AC%EC%A7%84/%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B5%AC%EC%A1%B0.png"
    width="400"
    height="400"
  />
</p>

1. 그림에서 device Controller
   키보드를 관리하는 작은 CPU는 키보드 Controller라고 부른다.  
   프린트를 관리하는 작은 CPU는 프린트 Controller라고 부른다.  
   이러한 Controller들은 기계어같은 것들을 연산하는 기능을 가지고 있다. 이들의 작업 공간은 local buffer이다.(device Controller앞에 붙어있는 초록색사각형 그림)  
   \+ CPU같은 경우 기계어같은 것들을 연산을 하려면 작업공간이 필요하고 그것이 Memory이다.

2. Mode bit  
   A. Mode bit이란?  
    mode bit는 CPU가 기계어를 실행할 때, 지금 Memory의 운영체제가 실행하는건지, 사용자 프로그램이 실행하는 것인지를 구분해준다.  
   B. 왜 Mode bit같은 장치가 필요할까?
   만약 사용자 프로그램이 잘못된 수행을 할 때(악의적이든 아니든), 막을 수 있는 방법이 따로 없기 때문에 사용자 프로그램이 수행 중일 경우 다른 프로그램 및 운영체제를 보호하기 위한 보호 장치가 필요하다.  
   C. 2가지 모드  
   a. 모니터 모드(커널모드, 시스템 모드) : bit가 0 => OS코드 수행일 경우  
    마음대로 사용이 가능, 보안을 해칠 수 있는 명령이 수행 가능(특권 명령 = 위험한 기계어)  
   b. 사용자 모드 : bit이 1 => 사용자 프로그램 수행  
    위험한 기계어 즉, 특권명령이 수행 되지 않음.  
    CPU는 기계어가 위험한 기계어인지 아닌지 확인을 한다. 이때 Mode bit을 통해서, 사용자 모드에서 위험한 기계어가 확인이 되면, 자동적으로 CPU가 운영체제 메모리로 넘어가게 되어있다. 운영체제는 그 기계어에 맞는 응징(Interrupt의 Exception)을 한다.
   CPU에는 Interrupt line이라는 것이 붙어있다. 그래서 기계어를 하나 읽을 때마다 매번 Interrupt line에 뭔가 들어온게 있는지 체크한다.

3. registers

- CPU 안에는 registers가 있다. registers는 CPU가 연산을 하면 인풋과 아웃풋이 있는데 이를 저장하는 것임.
- registers 중에서는 program counter registers라는 것이 있다. program counter register는 메모리의 주소를 가지고 있다. 즉, 다음번에 실행할 기계어의 주소를 가지고 있다.

4. timer  
   A. timer란?  
    timer는 일정시간 간격으로 timer Interrupt를 발생시킨다. (Interrupt니깐 CPU에게 전달을 하겠지!)  
   B. 왜 timer장치가 필요할까?  
    timer는 CPU의 특정 프로그램의 독점을 막기위해 사용한다.  
    \+ 운영체제가 사용자 프로그램에게 CPU를 넘길 때 그냥 넘기는게 아니고 timer를 세팅한 다음에 넘긴다.

- 만약 사용자 프로그램에서 무한루프를 돌고 있다면?  
  이를 CPU 혼자서 막을 수 없고, 메모리에 올라온 운영체제 역시 도울 수가 없다. 이미 사용자 프로그램에서 무한루프를 돌고 있으니깐!(독점) 그래서 이를 방지하기 위해서 timer라는 하드웨어를 두고 있다. 이 timer는 일정시간 간격으로 Interrupt를 발생시킨다.(timer Interrupt) 그래서 일정 시간이 흐르면 timer Interrupt가 발생되고 다시 운영체제로 넘어가서 운영체제가 다른 프로그램에게 CPU권한을 넘겨준다.

---

출처: http://www.kocw.net/home/cview.do?lid=d8c164a3f4d4b2dd  
출처: http://www.kocw.net/home/cview.do?lid=6de74734c21ccab4
