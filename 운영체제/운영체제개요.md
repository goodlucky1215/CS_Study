##### 1.운영체제의 목적

<p align="center">
  <img
    src="https://github.com/goodlucky1215/CS_Study/blob/main/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%9E%80.png"
    width="300"
    height="300"
  />
</p>

- 컴퓨터 시스템을 편리하게 사용할 수 있는 환경을 제공  
  ex) 한 대의 컴퓨터에 여러 프로그램(유투브에서 음악을 들으면서, 코딩을 하면서, 인터넷 쇼핑도 하면서)이 마치 다 따로 수행되는 듯한 환상을 제공(그러나 하나의 운영체제가 그것을 그렇게 보이도록 제공해주는 것이다.)
- 컴퓨터의 시스템의 자원(CPU, 메모리, I/O장치 등)을 효율적으로 관리 -> but 형평성도 생각해야함.(특정 프로그램만이 많은 자원을 차지하거나 하면 안됨.)  
  ex) 컴퓨터에 여러 프로그램이 동시에 실행되면 CPU가 짧은 시간씩 번갈아가면서 할당해서 우리 눈에는 전부 실행되는 것처럼 보이는 것임  
  ex) 컴퓨터에 여러 프로그램이 하나의 메모리 공간에 분배해서 실행되도록 한다.

- CPU란?  
  CPU의 작업공간은 메모리이다. CPU는 매 클럭마다 메모리 어딘가에 있는 기계어를 하나씩 읽어다가 연산을 한다.
- I/O디바이스란?  
  I는 Input디바이스에서 컴퓨터 내부로 보내는 것을 의미(ex)키보드, 마우스),  
  O는 Output디바이스로 컴퓨터 내부애서 내보는 것을 의미(ex)프린터, 컴퓨터모니터),  
  디스크는 Input, output이 모두 가능

[CPU의 작업공간인 메모리]

컴퓨터에 부팅이 일어난다는 것은 운영체제가 메모리에 올라간다. => 운영체제라는 것은 컴퓨터가 꺼지기 전까지 항상 실행되는 것이다. => 그래서 운영체제의 핵심적인 것을 운영체제 커널이라고 부른다. 이 커널이 메모리에 상주해있다. => 그래서 이 운영체제 부분을 제외하고, 프로그램들이 나누어 메모리 공간을 차지한다.

CPU는 I/O디바이스에 직접 접근을 할 수는 없다. 각 I/O디바이스에 전담하는 CPU Controller가 있고, 또 각 I/O디바이스에 있는 메모리가 있다.

CPU가 프로세스A에 관해 읽다가 이 프로세스에 필요한 디스크에 존재하는 파일의 내용을 읽어서 프로그램을 사용해야하는 상황이 온다 => 그래서 CPU가 CPU Controller에게 요청한다() => 각 I/O디바이스에 있는 메모리에 담는다 => CPU Controller가 인터럽트를 걸어서 CPU에 담았다고 알려준다 => 그러면 CPU는 인터럽트가 들어온게 확인되면 CPU는 메모리 중에서 읽던 프로세스에서 메모리에 있는 운영체제로 넘어간다. => 운영체제는 인터럽트가 들어온 이유를 보고, 프로세스A가 필요한 데이터가 왔구나를 알고 CPU가 프로세스A 기계어를 다시 읽을 수 있도록 해준다.

Q1. controller에게 요청하고 나서 무엇을 할까? CPU는 다른 프로그램으로 넘어가서 작업을 한다. 이때, CPU가 기계어를 하나 읽을 후마다 매번 인터럽트된게 없는지를 체크한다.

(이때 cpu가 여러 프로그램을 돌다가, 각각의 프로그램에서 필요한 것들을 디스크에 요청을 하게 된다면 디스크도 무엇부터 처리할지? => 디스크 스케줄링)
(느린I/O장치와 빠른CPU 장치간의 속도 차이의 극복은? => 인터럽트, 캐싱)
*캐싱 : CPU와 메모리 사이에도 속도차이가 100배라서 그 사이에 캐싱을 두고, 메모리와 디스크 사이에도 속도차이가 나기 때문에 디스크에 필요한 데이터가 필요하면 디스크에 계속 들르지말고 메모리에 올려두고 그냥 바로 꺼내 쓸수 있게 하는 것이 캐싱)
*인터럽트 : cpu는 디스크보다 속도가 100만배가 빠르다. 그러면 cpu는 프로그램A에 대해서 디스크에서 필요한 데이터가 있다면 cpu

CPU스케줄링 : 어떤 프로그램에게 CPU권한을 줄것이냐?
CPU는 그냥 메모리에 올라와있는 기계어를 읽을 뿐이다. 그렇다면 메모리에 있는 다른 프로그램으로 어떻게 넘겨서 다른 프로그램의 기계어를 읽는 것이냐? 프로그램C를 읽다가 프로그램C의 기계어 중 프로그램A로 넘기라는 것을 읽고 CPU는 프로그램A로 넘어가서 기계어를 읽을 뿐이다.

실행중인 프로그램을 프로세스라고 부른다.
저 초록색 동그라미가 프로세스
cpu큐에 차곡차곡 실행될 프로세스가 순서대로 담긴다.
CPU에 실행되던 프로세스가 만약 디스크에서 파일, 데이터가 필요하게 된다면 CPU큐에 담아도 어차피 기다려야하기때문에(cpu controller의 인터럽트가 올때까지), 거기에 넣지않고
디스크 입출력 큐에다가 담아둔다. 그러고 나서 나중에 인터럽트 작업이오고 메모리에 운영체제 작업을 거치면, 디스크 입출력 큐에 담아뒀던 프로세스가 다시 cpu큐로 들어간다.

사람이 키보드를 두드리면 키보드컨트롤러가 cpu에게 인터럽트를 걸어서 키보드에 입력이 들어옴을 알려줘서 cpu가 메모리에 있는 운영체제로 넘어가고 운영체제는 키보드입력으로 들어온데이터를 메모리로 카피해서 그 프로그램이 사용할 수 있게 해준다

---

출처: http://www.kocw.net/home/cview.do?lid=248a533dda95d005
